<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    
    <title>WCH</title>

    <link href="styles.css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
    
    <link href="https://fonts.googleapis.com/css?family=Righteous" rel="stylesheet">

</head>

<body>

    <nav id="navigation" class="sidebar">
        <ul>
            <li onmouseover="trophyIn()" onmouseout="trophyOut()" onclick="selectChampion()">
                <a href="#">
                        <i class="fa fa-trophy fa-2x"></i>
                        <span class="nav-text">
                            Champions
                        </span>
                        <div id="champion" class="check">&#x2713;</div>
                    </a>

            </li>

            <li onmouseover="bracketIn()" onmouseout="bracketOut()" onclick="selectBracket()">
                <a href="#">
                        <i class="fa fa-sitemap fa-2x"></i>
                        <span class="nav-text">
                            Knockout Stages
                        </span>
                        <div id="bracket" class="check">&#x2713;</div>
                    </a>

            </li>
            <li  onmouseover="scorerIn()" onmouseout="scorerOut()"  onclick="selectScorer()">
                <a href="#">
                        <i class="fa fa-futbol fa-2x"></i>
                        <span class="nav-text">
                            Top Scorers
                        </span>
                        <div id="scorer" class="check">&#x2713;</div>
                    </a>

            </li>
            <!--
                  <li>
                    <a href="#">
                        <i class="fa fa-tv fa-2x"></i>
                        <span class="nav-text">
                        ???
                        </span>
                    </a>

                </li>
                  <li>
                    <a href="#">
                        <i class="fa fa-home fa-2x"></i>
                        <span class="nav-text">
                            Home
                        </span>
                    </a>


                </li>
                -->
        </ul>
        <a href="#" class="sidebar-toggle" onclick="addClass()"></a>
    </nav>


    <div id="champions-display">Home
    <div class="row" id="main-container">
        <div class="column">
            <div id="home-team">
                <div id="loaderA">
                    <div class="dot dot1"></div>
                    <div class="dot dot2"></div>
                    <div class="dot dot3"></div>
                    <div class="dot dot4"></div>
                </div>
                <div id="home-country-code"></div>
                <div id="home-country-flag">
                   <!-- Add div to keep flag space so that changing between final scores creates a smoother transition intead of seeing the scores ocupying the flag space for milliseconds. -->
                    <!--            <img src="countryFlags/ARG.png" class="flags">-->
                </div>
                <div id="home-score"></div>
            </div>
        </div>

        <div class="column" id="cup">
            <img src="wctrophy.png" class="trophy">
        </div>

        <div class="column">
            <div id="away-team">
                <div id="loaderB">
                    <div class="dot dot1"></div>
                    <div class="dot dot2"></div>
                    <div class="dot dot3"></div>
                    <div class="dot dot4"></div>
                </div>
                <div id="away-country-code"></div>
                <div id="away-country-flag">
                    <!--            <img src="countryFlags/URU.png" class="flags">-->
                </div>
                <div id="away-score"></div>


            </div>
        </div>
    </div>
    <div id="output">


    </div>
    <div id="search-form">
        <form id="cform" action="/getWorldCupDetails" method="GET">
            <select id="finalists" name="year">
                <option value="1930">Uruguay - 1930</option>
                <option value="1934">Italy - 1934</option>
                <option value="1938">France - 1938</option>
                <option value="1950">Brazil - 1950</option>
                <option value="1954">Switzerland - 1954</option>
                <option value="1958">Sweden - 1958</option>
                <option value="1962">Chile - 1962</option>
                <option value="1966">England - 1966</option>
                <option value="1970">Mexico - 1970</option>
                <option value="1974">West Germany 1974</option>
                <option value="1978">Argentina - 1978</option>
                <option value="1982">Spain 1982</option>
                <option value="1986">Mexico - 1986</option>
                <option value="1990">Italy - 1990</option>
                <option value="1994">United States - 1994</option>
                <option value="1998">France - 1998</option>
                <option value="2002">South Korea and Japan - 2002</option>
                <option value="2006">Germany - 2006</option>
                <option value="2010">South Africa - 2010</option>
                <option value="2014">Brazil - 2014</option>
                <option value="2018">Russia - 2018</option>
            </select>

            <button>Final Match Result</button>
        </form>
    </div>
    </div>
    
    <div id="brackets-display">       
        <div class="col-container">
        <div id="round16" class="column-2" style="background:orange">
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of South Korea</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            
            <br>
            <br>
             <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">korea</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <br>
            
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            
            <br>
            <br>
             <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">korea</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <br> 
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            
            <br>
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">United States</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            
            <br>
            <br>
             <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">korea</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            
            <br>
            <br>
            
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            
            <br>
            <br>
             <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">korea</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <div class="team-bracket">
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            </div>
            
            
<!--            Quaterfinals-->
           
            <div id="quarterfinals" class="column-2" style="background:yellow">
           <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">United States</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            
            <br>
            <br>
             <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">korea</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            
            <br>
            <br>
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            
            <br>
            <br>
             <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">korea</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
        </div>
        
        
<!--        SemiFinals-->
        
        <div id="semifinals" class="column-2" style="background:orange">
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">United States</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            
            <br>
            <br>
             <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">korea</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            
            <br>
            
           
        </div>
        
<!--        Final-->
        
        <div class="column-2" style="background:yellow">
           <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">Republic of Ireland</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>
            <br>
          
            <div class="team-bracket">
               
                <div id="team-1-flag" class="team flag"><img src="countryFlags/ARG.png" id="arg"></div>
                <div id="team-1-name" class="team country-name">United States</div>
                <div id="team-1-goals" class="team team-goals">3</div>
            </div>  
            <br>
        </div>

        <div class="column-2"  style="background:orange">
            <img src="wctrophy.png" class="cup-bracket">
        </div>

        
    </div>
    <div id="output">


    </div>
    <div id="search-form">
        <form id="bform" action="/getWorldCupMatchDetails" method="GET">
            <select id="brackets" name="year">
<!--
                <option value="1930">Uruguay - 1930</option>
                <option value="1934">Italy - 1934</option>
                <option value="1938">France - 1938</option>
                <option value="1950">Brazil - 1950</option>
                <option value="1954">Switzerland - 1954</option>
                <option value="1958">Sweden - 1958</option>
                <option value="1962">Chile - 1962</option>
                <option value="1966">England - 1966</option>
                <option value="1970">Mexico - 1970</option>
                <option value="1974">West Germany 1974</option>
                <option value="1978">Argentina - 1978</option>
                <option value="1982">Spain 1982</option>
                <option value="1986">Mexico - 1986</option>
                <option value="1990">Italy - 1990</option>
                <option value="1994">United States - 1994</option>
-->
                <option value="1998">France - 1998</option>
                <option value="2002">South Korea and Japan - 2002</option>
                <option value="2006">Germany - 2006</option>
                <option value="2010">South Africa - 2010</option>
                <option value="2014">Brazil - 2014</option>
                <option value="2018">Russia - 2018</option>
            </select>

            <button>Final Match Result</button>
        </form>
    </div>
     
        
    </div>
    
    <div id="scorer-display">
        
        Scorers whooho
        
        
    </div>

    <script>
        
        function selectChampion() {
           document.getElementById('champions-display').style.display = '';
             document.getElementById('brackets-display').style.display = 'none';
             document.getElementById('scorer-display').style.display = 'none';
            
            if (document.getElementById('bracket').classList.contains('check-on')) {
                document.getElementById('bracket').classList.toggle('check-on');
            }
            if (document.getElementById('scorer').classList.contains('check-on')) {
                document.getElementById('scorer').classList.toggle('check-on');
            }
            document.getElementById('champion').classList.toggle('check-on');
        }
        
        function selectBracket() {
            document.getElementById('champions-display').style.display = 'none';
            document.getElementById('scorer-display').style.display = 'none';
             document.getElementById('brackets-display').style.display = '';
             
            
            if (document.getElementById('champion').classList.contains('check-on')) {
                document.getElementById('champion').classList.toggle('check-on');
                
            } 
            if (document.getElementById('scorer').classList.contains('check-on')) 
            {
                 document.getElementById('scorer').classList.toggle('check-on');
            }
            document.getElementById('bracket').classList.toggle('check-on');
        }
        
        function selectScorer() {
            
            document.getElementById('champions-display').style.display = 'none';
              document.getElementById('brackets-display').style.display = 'none';
             document.getElementById('scorer-display').style.display = '';
            
            if (document.getElementById('champion').classList.contains('check-on')) {
                document.getElementById('champion').classList.toggle('check-on');
            } 
            if (document.getElementById('bracket').classList.contains('check-on')) {
                 document.getElementById('bracket').classList.toggle('check-on');
            }
            document.getElementById('scorer').classList.toggle('check-on');
            
        
        }
        
        
        function trophyIn() {
        var t = document.getElementsByClassName('fa-trophy')[0];
            var check = document.getElementsByClassName('check')[0];
            check.style.color = 'white';
            t.style.webkitTransform = 'rotate(360deg)';
        }
        
        function trophyOut() {
            var check = document.getElementsByClassName('check')[0];
            check.style.color = '#d20a11';
        var t = document.getElementsByClassName('fa-trophy')[0];
            t.style.webkitTransform = 'rotate(0deg)';
        }
        
        function bracketIn() {
        var t = document.getElementsByClassName('fa-sitemap')[0];
            var check = document.getElementsByClassName('check')[1];
             check.style.color = 'white';
            t.style.webkitTransform = 'rotate(90deg)';
        }
        
        function bracketOut() {
            var check = document.getElementsByClassName('check')[1];
            check.style.color = '#d20a11';
        var t = document.getElementsByClassName('fa-sitemap')[0];
            t.style.webkitTransform = 'rotate(0deg)';
        }
        
        function scorerIn() {
        var t = document.getElementsByClassName('fa-futbol')[0];
              var check = document.getElementsByClassName('check')[2];
             check.style.color = 'white';
            t.style.webkitTransform = 'rotate(360deg)';
        }
        
        function scorerOut() {
            var check = document.getElementsByClassName('check')[2];
            check.style.color = '#d20a11';
        var t = document.getElementsByClassName('fa-futbol')[0];
            t.style.webkitTransform = 'rotate(0deg)';
        }
        
        function addClass() {
            document.getElementById('navigation').classList.toggle('sidebar-open');
        }

        // Constants used during the AJAX request.
        const DONE = 4;
        const OKAY = 200;
        const ERROR = {
            "message": "The request failed!"
        };

        // Wait for the document to load before binding event handlers further.
        document.addEventListener('DOMContentLoaded', function(e) {

            selectChampion();
            // Obtain programmatic reference to the important elements of the page.
            var cform = document.getElementById('cform'),
                finalists = document.getElementById('finalists'),
                output = document.getElementById('output'),
                homeTeam = document.getElementById('home-country-code'),
                awayTeam = document.getElementById('away-country-code'),
                homeScore = document.getElementById('home-score'),
                awayScore = document.getElementById('away-score'),
                homeFlag = document.getElementById('home-country-flag'),
                awayFlag = document.getElementById('away-country-flag');

            var a = document.getElementById('loaderA');
            var b = document.getElementById('loaderB');

            var hTeamBox = document.getElementById('home-team');
            var aTeamBox = document.getElementById('away-team');


            // brakets variables
            
            var bform = document.getElementById('cform'),
                brackets = document.getElementById('brackets');
            
            bform.addEventListener('submit', function(e) {
                
                e.preventDefault();
                
                var request = new XMLHttpRequest(),
                    target = '/getWorldCupMatchDetails?year=' + brackets.value;
                
                request.open('GET', target);
                
                request.send();
                
                request.onreadystatechange = function() {

                    // Do nothing until the request is finished.
                    if (request.readyState === DONE) {
                    
                        if (request.status === OKAY) {
                        
                        let dataObj = JSON.parse(request.responseText);
                        } else {
                            console.log(JSON.stringify(ERROR));
                        }
                    }
                };         
            });
                

            // Listen for submission events on the example form.
            cform.addEventListener('submit', function(e) {
                 
                if (document.getElementById('navigation').classList.contains('sidebar-open')){
                    addClass();
                }
                 
                

                // Programmatically prevent the form from submitting.
                e.preventDefault();

                // Create a new XMLHttpRequest object and resolve the target URI.
                var request = new XMLHttpRequest(),
                    target = '/getWorldCupDetails?year=' + finalists.value;

                // Open and send a GET request to the target URI.
                request.open('GET', target);



                output.innerHTML = "";
                homeTeam.innerHTML = "";
                awayTeam.innerHTML = "";
                homeFlag.innerHTML = "";
                awayFlag.innerHTML = "";
                homeScore.innerHTML = "";
                awayScore.innerHTML = "";

                hTeamBox.style.opacity = '0';
                aTeamBox.style.opacity = '0';

                request.send();

                // Listen for changes to the XMLHttpRequest's readyState.
                request.onreadystatechange = function() {

                    // Do nothing until the request is finished.
                    if (request.readyState === DONE) {
                        a.style.display = "table";
                        b.style.display = "table";
                        // Create a div element to hold the output.
                        var div = document.createElement('div');

                        // If the request was successful, append the response.
                        // If not, append a JSON error object.
                        if (request.status === OKAY) {


                            setTimeout(function() {
                                a.style.display = "none";
                                b.style.display = "none";
                                let dataObj = JSON.parse(request.responseText);

                                homeTeam.innerHTML = dataObj[0].champion_code;
                                awayTeam.innerHTML = dataObj[0].runner_up_code;

                                homeFlag.innerHTML = "<img src='countryFlags/" + dataObj[0].champion_code + ".png'" + "class='flags'>";
                                awayFlag.innerHTML = "<img src='countryFlags/" + dataObj[0].runner_up_code + ".png'" + "class='flags'>";

                                div.innerHTML = "<div>Champion: " + dataObj[0].champion + "</div><div>Runner-up: " + dataObj[0].runner_up + "</div>";

                                homeScore.innerHTML = dataObj[0].champion_score;
                                awayScore.innerHTML = dataObj[0].runner_up_score;

                                hTeamBox.style.opacity = '1';
                                aTeamBox.style.opacity = '1';

                            }, 1000);
                        } else {
                            div.appendChild(document.createTextNode(JSON.stringify(ERROR)));
                        }

                        // Append the div to the output container.
                        output.appendChild(div);
                    }
                };
            });
        });

    </script>
</body>

</html>
